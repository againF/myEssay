# 版本控制（主要针对直接在FTP服务器中修改代码的场景）
作者：吴业飞
时间：2018.07.14


---
## 前言
本文讨论的工作场景是从FTP服务器上拉取代码到本地，完成开发后再上传到FTP服务器上。在这个场景下我们该怎么做版本管理。  
本文不涉及git、svn等版本控制方案，因为在我看来在本文讨论的场景下使用它们是杀鸡用牛刀，反而增加了复杂度。  
本文提出的解决方案也许不是最佳方案，只是我当前使用的解决方案，在此总结出来。  
## 需求分析
我们的代码一旦上传到FTP上，在FTP上是不好做回滚操作的，也就是说FTP上的代码应该是最新版的代码，或者说我们应该保持FTP上的代码是最新版的。那么要做版本管理只能放在本地做。在说解决方案前我想先谈谈我为什么会想到这样操作。  
### 情景还原
我在本地修改代码，我不想频繁地上传来预览，原因如下：  
1. 上传代码意味着停下来编码，会中断思路，影响节奏  
2. 频繁地上传-预览很浪费时间，网速不好的时候等网页刷新会极大地影响心情  
所以我追求的是直接将VS code全屏，排除一切干扰，一口气改完，一次性上传。基于这个出发点，有个问题，一天下来，我怎么记得我改了哪些文件，我该上传哪些文件呢？所以我就想出了下面的解决方案。
## 工作流程总结
1. 将FTP上的文件下载，我们暂且叫他【dev】方便后文说明是哪个文件（夹）
2. 备份一份刚刚下载的文件（夹），命名为backup + 时间,我们叫他【backup】
3. 将备份文件拖到Beyond Compare的左边，代表服务器上的版本，将【dev】拖到Beyond Compare的右边代表当前修改版本
4. 现在我们就不用管Beyond Compare了，将Beyond Compare最小化然后开心地去VS code里开发吧
5. 快下班时，将今天修改的版本也就是【dev】备份，命名为backup + 今天的日期
6. 将【dev】上传到FTP服务器上，这样可以粗暴地全部上传，但是不推荐，因为时间可能很长，其次我们没必要将我们没有修改过的文件上传，这个时候我们应该打开我们的Beyond Compare，看看哪些文件是标红的，将标红文件上传就行了
7. 第二天上班，重复流程1-6，这里说明一下，如果确认没人动过FTP上的文件只有你在更新的话，在流程【1】我们第二天上班就不用去FTP下载了，直接打开昨晚备份的文件（夹）就行，因为昨晚备份的文件（夹）就是我们上传到服务器上的最新版（如果昨晚没有发生什么奇怪的事的话）
## 备注
本文提到的软件Beyond Compare是一款文件对比软件，可以对比两份代码中有哪些不同的地方，会标红
  




---

版权声明：自由转载-非商用-非衍生-保持署名
